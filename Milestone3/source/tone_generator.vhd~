-------------------------------------------------------------------------------
-- Project     : tone_generator
-- Description : Constants and LUT for tone generation with tone_generator
--
--
-------------------------------------------------------------------------------
--
-- Change History
-- Date     |Name      |Modification
------------|----------|-------------------------------------------------------
-- 22.04.19 | rutiscla     | tone_genarator-Baustein programmieren

-------------------------------------------------------------------------------

-------------------------------------------------------------------------------
-- Package  Declaration
-------------------------------------------------------------------------------
-- Include in Design of Block tone_generator.vhd and tone_decoder.vhd :
--   use work.tone_gen_pkg.all;
-------------------------------------------------------------------------------
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;
use work.tone_gen_pkg.all;

entity tone_generator is
  port(
    note_vector : in  std_logic_vector (6 downto 0);
    --attenu_i    : in  std_logic_vector (3 downto 0);
    load_i      : in  std_logic;
	clk_12m		: in std_logic;
	reset_n		: in std_logic;
    dds_o       : out std_logic_vector(N_AUDIO -1 downto 0));
end tone_generator;


-------------------------------------------------------------------------------

architecture struct of tone_generator is

  component DDS is
    port (
      clk_12m    : in  std_logic;
      load_i     : in  std_logic;
      reset_n    : in  std_logic;
      phi_incr_i : in  std_logic_vector (N_CUM-1 downto 0);
     -- tone_on_i  : in  std_logic;
     -- attenu_i   : in  std_logic_vector (3 downto 0);
      dds_o      : out std_logic_vector (N_AUDIO -1 downto 0));
  end component DDS;
  
  begin
  

  DDS_1: DDS
    port map (
      clk_12m    => clk_12m,
      load_i     => load_i,
      reset_n    => reset_n,
      phi_incr_i =>  LUT_midi2dds(to_integer(unsigned(note_vector))),  --lut_midi2dds in tone_generator,
    --  tone_on_i  => ,
     -- attenu_i   => attenu_i,
      dds_o      => dds_o);

end architecture struct;
